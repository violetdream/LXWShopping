webpackJsonp([4],{"7EIK":function(t,i,e){"use strict";var s={props:{num:{type:[Number],default:1},id:{type:[Number,String]},checked:{type:[String,Boolean]},limit:{type:Number,default:10}},computed:{},data:function(){return{show:!0,flag:!0,Num:this.num,numList:[]}},methods:{up:function(){return this.flag&&this.Num<this.limit&&this.ani("up"),!1},down:function(){return this.flag&&this.Num>1&&this.ani("down"),!1},blur:function(){this.Num=this.Num>this.limit?Number(this.limit):Number(this.Num),this.$emit("edit-num",this.Num,this.id,this.checked)},ani:function(t){var i=this;this.flag=!1;var e=this.Num;this.numList=[e-1,e,e+1];var s=this.$refs.ul,a=s.style;this.show=!1,a.zIndex="99",a.transition="all .2s ease-out","up"===t?(this.Num++,a.transform="translateY(-54px)"):(this.Num--,a.transform="translateY(-18px)"),s.addEventListener("transitionend",function(){i.show=!0,i.domInt(a),i.flag=!0}),s.addEventListener("webkitAnimationEnd",function(){i.show=!0,i.domInt(a),i.flag=!0}),this.$emit("edit-num",this.Num,this.id,this.checked)},domInt:function(t){t.zIndex="1",t.transition="all 0s",t.transform="translateY(-36px)"}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"item-cols-num clearfix"},[e("div",{staticClass:"select"},[e("span",{staticClass:"down",class:{"down-disabled":t.Num<=1},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.down()}}},[t._v("-\n    ")]),t._v(" "),e("span",{staticClass:"num"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Num>=t.limit?t.limit:t.Num,expression:"Num>=limit?limit:Num"}],class:{show:t.show},attrs:{type:"text",maxlength:"2"},domProps:{value:t.Num>=t.limit?t.limit:t.Num},on:{blur:function(i){return t.blur()},input:function(i){i.target.composing||(t.Num>=t.limit?t.limit:t.Num=i.target.value)}}}),t._v(" "),e("ul",{ref:"ul"},t._l(t.numList,function(i){return e("li",{key:i},[t._v(t._s(i))])}),0)]),t._v(" "),e("span",{staticClass:"up",class:{"up-disabled":t.Num>=t.limit},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.up()}}},[t._v("+")])])])},staticRenderFns:[]};var n=e("VU/8")(s,a,!1,function(t){e("Tj3C")},"data-v-1fd3b741",null);i.a=n.exports},Tj3C:function(t,i){},UTdK:function(t,i){},j8FD:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Dd8w"),a=e.n(s),n=e("qsHl"),o=e("NYxO"),u=e("PgMb"),r=e("7EIK"),c=e("K8dV"),l=e("VKKs"),d={data:function(){return{productMsg:{},small:[],big:"",product:{salePrice:0},productNum:1,userId:"",pageForm:{page:0,size:10},activeTab:"itemInfo",totalCommentCount:0,commentList:[],commentType:null}},computed:a()({},Object(o.c)(["login","showMoveImg","showCart"])),methods:a()({},Object(o.b)(["ADD_CART","ADD_ANIMATION","SHOW_CART"]),{_productDet:function(t){var i=this;Object(n.v)({params:{productId:t}}).then(function(t){var e=t.result;i.product=e,i.productMsg=e.detail||"",i.small=e.productImageSmall,i.big=i.small[0]})},_productCommentCount:function(t){var i={productId:t,type:this.commentType};Object(n.m)({params:i}).then(function(t){var i=t.result;console.log("%c[goodsDetails-res]","color: #63ADD1",i)})},_productCommentList:function(t){var i={productId:t,type:this.commentType,page:this.pageForm.page,size:this.pageForm.size};Object(n.l)({params:i}).then(function(t){var i=t.result;console.log("%c[goodsDetails-res]","color: #63ADD1",i)})},_handleTabClick:function(t){"comment"===t.name&&0!==this.totalCommentCount&&(this.pageForm.page=0,this._productCommentList(this.$route.params.productId))},addCart:function(t,i,e,s){var a=this;if(!this.showMoveImg){this.login?Object(n.a)({userId:this.userId,productId:t,productNum:this.productNum}).then(function(n){a.ADD_CART({productId:t,salePrice:i,productName:e,productImg:s,productNum:a.productNum})}):this.ADD_CART({productId:t,salePrice:i,productName:e,productImg:s,productNum:this.productNum});var o=event.target,u=o.getBoundingClientRect().left+o.offsetWidth/2,r=o.getBoundingClientRect().top+o.offsetHeight/2;this.ADD_ANIMATION({moveShow:!0,elLeft:u,elTop:r,img:s}),this.showCart||this.SHOW_CART({showCart:!0})}},checkout:function(t){this.$router.push({path:"/checkout/"+t+"/"+this.productNum})},editNum:function(t){this.productNum=t}}),components:{YShelf:u.a,BuyNum:r.a,YButton:c.a},watch:{$route:function(t,i){if(t.fullPath.includes("/product/")){var e=this.$route.params.productId;this._productDet(e),this.userId=Object(l.a)("userId")}}},created:function(){var t=this.$route.params.productId;this._productDet(t),this._productCommentCount(t),this.userId=Object(l.a)("userId")}},m={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"w store-content"},[e("div",{staticClass:"gray-box"},[e("div",{staticClass:"gallery-wrapper"},[e("div",{staticClass:"gallery"},[e("div",{staticClass:"thumbnail"},[e("ul",t._l(t.small,function(i,s){return e("li",{key:s,class:{on:t.big===i},on:{click:function(e){t.big=i}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"item"}],attrs:{alt:t.product.productName}})])}),0)]),t._v(" "),e("div",{staticClass:"thumb"},[e("div",{staticClass:"big"},[e("img",{attrs:{src:t.big,alt:t.product.productName}})])])])]),t._v(" "),e("div",{staticClass:"banner"},[e("div",{staticClass:"sku-custom-title"},[e("h4",[t._v(t._s(t.product.productName))]),t._v(" "),e("h6",[e("span",[t._v(t._s(t.product.subTitle))]),t._v(" "),e("span",{staticClass:"price"},[e("em",[t._v("¥")]),e("i",[t._v(t._s(t.product.salePrice.toFixed(2)))])])])]),t._v(" "),e("div",{staticClass:"num"},[e("span",{staticClass:"params-name"},[t._v("数量")]),t._v(" "),e("buy-num",{attrs:{limit:Number(t.product.limitNum)},on:{"edit-num":t.editNum}})],1),t._v(" "),e("div",{staticClass:"buy"},[e("y-button",{staticStyle:{width:"145px",height:"50px","line-height":"48px"},attrs:{text:"加入购物车",classStyle:"main-btn"},on:{btnClick:function(i){return t.addCart(t.product.productId,t.product.salePrice,t.product.productName,t.product.productImageBig)}}}),t._v(" "),e("y-button",{staticStyle:{width:"145px",height:"50px","line-height":"48px","margin-left":"10px"},attrs:{text:"现在购买"},on:{btnClick:function(i){return t.checkout(t.product.productId)}}})],1)])]),t._v(" "),e("el-tabs",{staticStyle:{background:"#fff","border-radius":"5px",padding:"0 50px"},on:{"tab-click":t._handleTabClick},model:{value:t.activeTab,callback:function(i){t.activeTab=i},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"产品信息",name:"itemInfo"}},[e("div",{staticClass:"item-info",staticStyle:{"border-radius":"5px"}},[e("div",[t.productMsg?e("div",{staticClass:"img-item"},[e("div",{domProps:{innerHTML:t._s(t.productMsg)}},[t._v(t._s(t.productMsg))])]):e("div",{staticClass:"no-info"},[e("img",{attrs:{src:"/static/images/no-data.png"}}),t._v(" "),e("br"),t._v("\n            该商品暂无内容数据\n          ")])])])]),t._v(" "),e("el-tab-pane",{attrs:{label:"评论",name:"comment"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("评论（"+t._s(t.totalCommentCount)+")")]),t._v(" "),e("div",{staticStyle:{"min-height":"300px"}},[t.commentList&&0!==t.commentList.length?e("div"):e("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"130px"}},[e("span",{staticStyle:{"font-size":"20px"}},[t._v("当前商品无评价")])])])])],1)],1)},staticRenderFns:[]};var p=e("VU/8")(d,m,!1,function(t){e("UTdK")},"data-v-c7b2e5aa",null);i.default=p.exports}});