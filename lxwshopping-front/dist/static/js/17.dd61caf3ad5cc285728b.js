webpackJsonp([17],{ML7K:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("qsHl"),i=s("gyMJ"),n=s("4SIF"),r=s("K8dV"),o=s("PgMb"),c=s("PBVb"),l=s("CPkp"),u={data:function(){return{goods:[],noResult:!1,error:!1,min:"",max:"",loading:!0,searching:!0,timer:null,sortType:1,windowHeight:null,windowWidth:null,sort:"",recommendPanel:[],currentPage:1,pageSize:20,total:0,key:""}},methods:{handleSizeChange:function(t){this.pageSize=t,this._getSearch(),this.loading=!0},handleCurrentChange:function(t){this.currentPage=t,this._getSearch(),this.loading=!0},_getSearch:function(){var t=this,e={params:{key:this.key,size:this.pageSize,page:this.currentPage,sort:this.sort,priceGt:this.min,priceLte:this.max}};Object(a.s)(e).then(function(e){!0===e.success?(t.goods=e.result.itemList,t.total=e.result.recordCount,t.noResult=!1,0===t.total&&(t.noResult=!0),t.error=!1):t.error=!0,t.loading=!1,t.searching=!1})},reset:function(){this.sortType=1,this.sort="",this.currentPage=1,this.loading=!0,this._getSearch()},sortByPrice:function(t){this.sortType=1===t?2:3,this.sort=t,this.currentPage=1,this.loading=!0,this._getSearch()}},created:function(){},mounted:function(){var t=this;this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.key=this.$route.query.key,this._getSearch(),Object(i.e)().then(function(e){var s=e.result;t.recommendPanel=s[0]})},components:{mallGoods:n.a,YButton:r.a,YShelf:o.a,YHeader:c.a,YFooter:l.a}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("div",{staticClass:"nav-subs"},[s("div",{staticClass:"nav-sub-bgs"}),t._v(" "),s("div",{staticClass:"nav-sub-wrappers"},[s("div",{staticClass:"w"},[s("ul",{staticClass:"nav-lists"},[s("li",[s("router-link",{attrs:{to:"/"}},[s("a",[t._v("首页")])])],1),t._v(" "),t._m(0),t._v(" "),s("li",[!0===t.searching?s("a",[t._v("拼命搜索中...")]):t._e(),t._v(" "),!1===t.searching?s("a",[t._v("共为您找到 "+t._s(t.total)+" 款商品信息")]):t._e()])]),t._v(" "),s("div")])])]),t._v(" "),s("div",{staticClass:"nav"},[s("div",{staticClass:"w"},[s("a",{class:{active:1===t.sortType},attrs:{href:"javascript:;"},on:{click:function(e){return t.reset()}}},[t._v("综合排序")]),t._v(" "),s("a",{class:{active:2===t.sortType},attrs:{href:"javascript:;"},on:{click:function(e){return t.sortByPrice(1)}}},[t._v("价格从低到高")]),t._v(" "),s("a",{class:{active:3===t.sortType},attrs:{href:"javascript:;"},on:{click:function(e){return t.sortByPrice(-1)}}},[t._v("价格从高到低")]),t._v(" "),s("div",{staticClass:"price-interval"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.min,expression:"min"}],staticClass:"input",attrs:{type:"number",placeholder:"价格"},domProps:{value:t.min},on:{input:function(e){e.target.composing||(t.min=e.target.value)}}}),t._v(" "),s("span",{staticStyle:{margin:"0 5px"}},[t._v(" - ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.max,expression:"max"}],attrs:{type:"number",placeholder:"价格"},domProps:{value:t.max},on:{input:function(e){e.target.composing||(t.max=e.target.value)}}}),t._v(" "),s("y-button",{staticStyle:{"margin-left":"10px"},attrs:{text:"确定",classStyle:"main-btn"},on:{btnClick:t.reset}})],1)])]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"35vw"},attrs:{"element-loading-text":"加载中..."}},[t.noResult?t._e():s("div",{staticClass:"img-item"},[s("div",{staticClass:"goods-box w"},t._l(t.goods,function(t,e){return s("mall-goods",{key:e,attrs:{msg:t}})}),1),t._v(" "),t.noResult||t.error?t._e():s("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[8,20,40,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.noResult?s("div",{staticClass:"no-info"},[t._m(1),t._v(" "),s("section",{staticClass:"section"},[s("y-shelf",{attrs:{title:t.recommendPanel.name}},[s("div",{staticClass:"recommend",attrs:{slot:"content"},slot:"content"},t._l(t.recommendPanel.panelContents,function(t,e){return s("mall-goods",{key:e,attrs:{msg:t}})}),1)])],1)]):t._e(),t._v(" "),t.error?s("div",{staticClass:"no-info"},[t._m(2),t._v(" "),s("section",{staticClass:"section"},[s("y-shelf",{attrs:{title:t.recommendPanel.name}},[s("div",{staticClass:"recommend",attrs:{slot:"content"},slot:"content"},t._l(t.recommendPanel.panelContents,function(t,e){return s("mall-goods",{key:e,attrs:{msg:t}})}),1)])],1)]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"active"},[this._v("搜索结果")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data"},[e("img",{attrs:{src:"/static/images/no-search.png"}}),this._v(" "),e("br"),this._v(" 抱歉！没有为您找到相关的商品\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data"},[e("img",{attrs:{src:"/static/images/error.png"}}),this._v(" "),e("br"),this._v(" 抱歉！出错了...\n      ")])}]};var d=s("VU/8")(u,v,!1,function(t){s("izUh")},"data-v-6a577745",null);e.default=d.exports},izUh:function(t,e){}});