webpackJsonp([0],{"0xDb":function(t,e,s){"use strict";e.a={isEmpty:function(t){return!t||(t instanceof Array?!t||0===t.length:"string"==typeof t?""===t.trim():void 0)}}},"4SIF":function(t,e,s){"use strict";var i=s("Dd8w"),n=s.n(i),a=s("K8dV"),o=s("qsHl"),r=s("NYxO"),c=s("VKKs"),u={props:{msg:{salePrice:0}},data:function(){return{}},methods:n()({},Object(r.b)(["ADD_CART","ADD_ANIMATION","SHOW_CART"]),{goodsDetails:function(t){this.$router.push({path:"product/"+t})},openProduct:function(t){window.open("//"+window.location.host+"/#/product/"+t)},addCart:function(t,e,s,i){var n=this;if(!this.showMoveImg){this.login?Object(o.a)({userId:Object(c.a)("userId"),productId:t,productNum:1}).then(function(a){n.ADD_CART({productId:t,salePrice:e,productName:s,productImg:i})}):this.ADD_CART({productId:t,salePrice:e,productName:s,productImg:i});var a=event.target,r=a.getBoundingClientRect().left+a.offsetWidth/2,u=a.getBoundingClientRect().top+a.offsetHeight/2;this.ADD_ANIMATION({moveShow:!0,elLeft:r,elTop:u,img:i}),this.showCart||this.SHOW_CART({showCart:!0})}}}),computed:n()({},Object(r.c)(["login","showMoveImg","showCart"])),mounted:function(){},components:{YButton:a.a}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"good-item"},[s("div",{},[s("div",{staticClass:"good-img"},[s("a",{on:{click:function(e){return t.openProduct(t.msg.productId)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.msg.picUrl,expression:"msg.picUrl"}],key:t.msg.picUrl,attrs:{alt:t.msg.productName}})])]),t._v(" "),s("h6",{staticClass:"good-title",domProps:{innerHTML:t._s(t.msg.productName)}},[t._v(t._s(t.msg.productName))]),t._v(" "),s("h3",{staticClass:"sub-title ellipsis"},[t._v(t._s(t.msg.subTitle))]),t._v(" "),s("div",{staticClass:"good-price pr"},[s("div",{staticClass:"ds pa"},[s("a",{on:{click:function(e){return t.openProduct(t.msg.productId)}}},[s("y-button",{staticStyle:{margin:"0 5px"},attrs:{text:"查看详情"}})],1),t._v(" "),s("y-button",{staticStyle:{margin:"0 5px"},attrs:{text:"加入购物车",classStyle:"main-btn"},on:{btnClick:function(e){return t.addCart(t.msg.productId,t.msg.salePrice,t.msg.productName,t.msg.picUrl)}}})],1),t._v(" "),s("p",[s("span",{staticStyle:{"font-size":"14px"}},[t._v("￥")]),t._v(t._s(Number(t.msg.salePrice).toFixed(2)))])])])])},staticRenderFns:[]};var d=s("VU/8")(u,l,!1,function(t){s("Lkb2")},"data-v-77b303a8",null);e.a=d.exports},BO1k:function(t,e,s){t.exports={default:s("fxRn"),__esModule:!0}},"G/V0":function(t,e){},Lkb2:function(t,e){},PBVb:function(t,e,s){"use strict";var i=s("pFYg"),n=s.n(i),a=s("BO1k"),o=s.n(a),r=s("Dd8w"),c=s.n(r),u=s("K8dV"),l=s("NYxO"),d=s("qsHl"),v=s("gyMJ"),h=s("VKKs"),p=(s("tvR6"),{data:function(){return{showCateDiv:!1,showRecommend:!1,curCateList:[],curItem:null,recommendPanel:null,goodsCateList:[],goodsCateTree:{},user:{},st:!1,cartShow:!1,positionL:0,positionT:0,timerCartShow:null,input:"",choosePage:-1,searchResults:[],timeout:null,token:"",navList:[]}},computed:c()({},Object(l.c)(["cartList","login","receiveInCart","showCart","userInfo"]),{totalPrice:function(){var t=0;return this.cartList&&this.cartList.forEach(function(e){t+=e.productNum*e.salePrice}),t},totalNum:function(){var t=0;return this.cartList&&this.cartList.forEach(function(e){t+=e.productNum}),t}}),methods:c()({},Object(l.b)(["ADD_CART","INIT_BUYCART","ADD_ANIMATION","SHOW_CART","REDUCE_CART","RECORD_USERINFO","EDIT_CART"]),{handleNavItemMouseEnter:function(t,e){var s=t.picUrl;if(this.showRecommend=!1,"手机"===s)return this.showCateDiv=!1,void(this.showRecommend=!0);var i=this.goodsCateTree[s];i?(this.curCateList=i.children,this.showCateDiv=!0):this.showCateDiv=!1},handleNavSubMouseLeave:function(){this.showCateDiv=!1,this.showRecommend=!1},handleIconClick:function(t){"/search"===this.$route.path?this.$router.push({path:"/refreshsearch",query:{key:this.input}}):this.$router.push({path:"/search",query:{key:this.input}})},goGoodsCatePage:function(t){var e=t.id;this.$router.push("/goods/cate/"+e),this.showCateDiv=!1},goRecommendGoodsDetail:function(t){var e=t.productId;this.$router.push("/product/"+e),this.showRecommend=!1},showError:function(t){this.$message.error({message:t})},changePage:function(t){this.choosePage=t},changGoods:function(t,e){this.changePage(t),-1===t?this.$router.push({path:"/"}):-2===t&&this.$router.push({path:"/refreshgoods"})},loadAll:function(){var t=this,e={params:{key:this.input}};Object(d.r)(e).then(function(e){if(null!==e&&""!==e)if(e.error)t.showError(e.error.reason);else{var s=[],i=5;e.hits.hits.length<=5&&(i=e.hits.hits.length);for(var n=0;n<i;n++){var a={};a.value=e.hits.hits[n]._source.productName,s.push(a)}0!==s.length?t.searchResults=s:t.searchResults=[]}})},querySearchAsync:function(t,e){var s=this;void 0!==this.input?(this.input=this.input.trim(),""!==this.input?(this.loadAll(),setTimeout(function(){e(s.searchResults)},300)):e([])):e([])},handleSelect:function(t){this.input=t.value},cartShowState:function(t){this.SHOW_CART({showCart:t})},_getCartList:function(){Object(d.p)({userId:Object(h.a)("userId")}).then(function(t){!0===t.success&&Object(h.c)("buyCart",t.result)}).then(this.INIT_BUYCART)},delGoods:function(t){var e=this;this.login?Object(d.g)({userId:Object(h.a)("userId"),productId:t}).then(function(s){e.EDIT_CART({productId:t})}):this.EDIT_CART({productId:t})},toCart:function(){this.$router.push({path:"/cart"})},navFixed:function(){var t=this.$route.path,e=!1;if(["goods/*","/home","product/*"].forEach(function(s,i,n){var a=new RegExp(s);return t.match(a)?void(e=!0):void 0}),e){var s=document.documentElement.scrollTop||document.body.scrollTop;this.st=s>=100;var i=document.querySelector(".num");this.positionL=i.getBoundingClientRect().left,this.positionT=i.getBoundingClientRect().top,this.ADD_ANIMATION({cartPositionL:this.positionL,cartPositionT:this.positionT})}},_loginOut:function(){var t={params:{token:this.token}};Object(v.b)(t).then(function(t){Object(h.b)("buyCart"),window.location.href="/"})},getPage:function(){var t=this.$route.path;"/"===t||"/home"===t?this.changePage(-1):"/goods"===t?this.changePage(-2):this.changePage(0)},openProduct:function(t){window.open("//"+window.location.host+"/#/product/"+t)},_getNavList:function(){var t=this;Object(v.c)().then(function(e){t.navList=e.result,console.log(t.navList)})},_getGoodsCategoryList:function(){var t=this;Object(d.o)().then(function(e){t.goodsCateList=e.result,t.goodsCateTree=t._buildCateTree(t.goodsCateList)})},_buildCateTree:function(t){var e=t.filter(function(t){return t.isParent})||[],s={};if(e){var i=function(e){var i=e.id,n=e.name,a=t.filter(function(t){return t.parentId===i&&!t.isParent}).map(function(e){var s=e.id,i=t.filter(function(t){return t.parentId===s&&!t.isParent});return c()({},e,{children:i})});s[n]=c()({},e,{children:a})},n=!0,a=!1,r=void 0;try{for(var u,l=o()(e);!(n=(u=l.next()).done);n=!0){i(u.value)}}catch(t){a=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}}return s},_getRecommendGoodsAsPhone:function(){var t=this;Object(v.e)().then(function(e){var s=e.result;t.recommendPanel=s[0]})}}),mounted:function(){this._getNavList(),this._getGoodsCategoryList(),this._getRecommendGoodsAsPhone(),this.token=Object(h.a)("token"),this.login?this._getCartList():this.INIT_BUYCART(),this.navFixed(),this.getPage(),window.addEventListener("scroll",this.navFixed),window.addEventListener("resize",this.navFixed),void 0!==n()(this.$route.query.key)&&(this.input=this.$route.query.key)},components:{YButton:u.a}}),m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-box"},[s("div",[s("header",{staticClass:"w"},[s("div",{staticClass:"w-box"},[s("div",{staticClass:"nav-logo"},[s("h1",{on:{click:function(e){return t.changePage(-1)}}},[s("router-link",{attrs:{to:"/",title:"商城"}},[s("i",{staticClass:"el-icon-present"}),t._v("商城")])],1)]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"right-box"},[s("div",{ref:"aside",staticClass:"nav-aside",class:{fixed:t.st}},[s("div",{staticClass:"user pr"},[s("router-link",{attrs:{to:"/user"}},[t._v("个人中心")]),t._v(" "),t.login?s("div",{staticClass:"nav-user-wrapper pa"},[s("div",{staticClass:"nav-user-list"},[s("ul",[s("li",{staticClass:"nav-user-avatar"},[s("div",[s("span",{staticClass:"avatar",style:{backgroundImage:"url("+t.userInfo.info.file+")"}})]),t._v(" "),s("p",{staticClass:"name"},[t._v(t._s(t.userInfo.info.username))])]),t._v(" "),s("li",[s("router-link",{attrs:{to:"/user/orderList"}},[t._v("我的订单")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/user/information"}},[t._v("账号资料")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/user/addressList"}},[t._v("收货地址")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/user/support"}},[t._v("售后服务")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/user/coupon"}},[t._v("我的优惠")])],1),t._v(" "),s("li",[s("a",{attrs:{href:"javascript:;"},on:{click:t._loginOut}},[t._v("退出")])])])])]):t._e()],1),t._v(" "),s("div",{ref:"positionMsg",staticClass:"shop pr",on:{mouseover:function(e){return t.cartShowState(!0)},mouseout:function(e){return t.cartShowState(!1)}}},[s("router-link",{attrs:{to:"/cart"}}),t._v(" "),s("span",{staticClass:"cart-num"},[s("i",{staticClass:"num",class:{no:t.totalNum<=0,move_in_cart:t.receiveInCart}},[t._v(t._s(t.totalNum))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCart,expression:"showCart"}],staticClass:"nav-user-wrapper pa active"},[s("div",{staticClass:"nav-user-list"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum,expression:"totalNum"}],staticClass:"full"},[s("div",{staticClass:"nav-cart-items"},[s("ul",t._l(t.cartList,function(e,i){return s("li",{key:i,staticClass:"clearfix"},[s("div",{staticClass:"cart-item"},[s("div",{staticClass:"cart-item-inner"},[s("a",{on:{click:function(s){return t.openProduct(e.productId)}}},[s("div",{staticClass:"item-thumb"},[s("img",{attrs:{src:e.productImg}})]),t._v(" "),s("div",{staticClass:"item-desc"},[s("div",{staticClass:"cart-cell"},[s("h4",[s("a",{attrs:{href:""},domProps:{textContent:t._s(e.productName)}})]),t._v(" "),s("h6",[s("span",{staticClass:"price-icon"},[t._v("¥")]),s("span",{staticClass:"price-num"},[t._v(t._s(e.salePrice))]),s("span",{staticClass:"item-num"},[t._v("x "+t._s(e.productNum))])])])])]),t._v(" "),s("div",{staticClass:"del-btn del",on:{click:function(s){return t.delGoods(e.productId)}}},[t._v("删除")])])])])}),0)]),t._v(" "),s("div",{staticClass:"nav-cart-total"},[s("p",[t._v("共 "),s("strong",[t._v(t._s(t.totalNum))]),t._v(" 件商品")]),t._v(" "),s("h5",[t._v("合计："),s("span",{staticClass:"price-icon"},[t._v("¥")]),s("span",{staticClass:"price-num"},[t._v(t._s(t.totalPrice))])]),t._v(" "),s("h6",[s("y-button",{staticStyle:{height:"40px",width:"100%",margin:"0",color:"#fff","font-size":"14px","line-height":"38px"},attrs:{classStyle:"main-btn",text:"去购物车"},on:{btnClick:t.toCart}})],1)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.totalNum,expression:"!totalNum"}],staticClass:"cart-con",staticStyle:{height:"313px","text-align":"center"}},[s("p",[t._v("您的购物车竟然是空的!")])])])])],1)])])])]),t._v(" "),t._t("nav",[s("div",{staticClass:"nav-sub",class:{fixed:t.st},on:{mouseleave:t.handleNavSubMouseLeave}},[s("div",{staticClass:"nav-sub-bg"}),t._v(" "),s("div",{staticClass:"nav-sub-wrapper",class:{fixed:t.st}},[s("div",{staticClass:"w"},[s("ul",{staticClass:"nav-list2"},[s("li",[s("router-link",{attrs:{to:"/"}},[s("a",{class:{active:-1===t.choosePage},on:{click:function(e){return t.changGoods(-1)}}},[t._v("首页")])])],1),t._v(" "),s("li",[s("a",{class:{active:-2===t.choosePage},on:{click:function(e){return t.changGoods(-2)}}},[t._v("全部商品")])]),t._v(" "),t._l(t.navList,function(e,i){return"0"==e.panelId?s("li",{key:i,on:{mouseenter:function(s){return t.handleNavItemMouseEnter(e,i)}}},[s("a",{class:{active:i===t.choosePage},on:{click:function(s){return t.changGoods(i,e)}}},[t._v(t._s(e.picUrl))])]):t._e()})],2),t._v(" "),s("div",{staticClass:"nav-search"},[s("el-autocomplete",{attrs:{placeholder:"请输入商品信息","suffix-icon":"el-icon-search","fetch-suggestions":t.querySearchAsync,"on-icon-click":t.handleIconClick},on:{select:t.handleSelect},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleIconClick(e)}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)])]),t._v(" "),t.showCateDiv?s("div",{staticClass:"dropdown-div"},[s("div",{staticClass:"cate-con"},t._l(t.curCateList,function(e,i){return s("div",{key:i,staticClass:"cate"},[s("div",{staticClass:"cate-name-label"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.children,function(e,i){return s("div",{key:i,staticClass:"cate-item",on:{click:function(s){return t.goGoodsCatePage(e)}}},[s("img",{staticClass:"item-icon",attrs:{src:e.iconUrl}}),t._v(" "),s("div",[t._v(t._s(e.name))])])})],2)}),0)]):t._e(),t._v(" "),t.showRecommend?s("div",{staticClass:"dropdown-div"},[s("div",{staticClass:"recommend-con"},t._l(t.recommendPanel.panelContentItems,function(e,i){return s("div",{key:i,staticClass:"recommend-item",on:{click:function(s){return t.goRecommendGoodsDetail(e)}}},[s("div",{staticClass:"item"},[s("img",{attrs:{src:e.picUrl,alt:"手机图片"}}),t._v(" "),s("div",{staticClass:"product-name"},[t._v(t._s(e.productName))]),t._v(" "),s("div",[s("span",{staticClass:"product-price"},[t._v("¥"+t._s(e.salePrice))]),t._v(" 起")])])])}),0)]):t._e()])])],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",attrs:{"_ngcontent-c1":""}},[e("ul",{staticClass:"nav-list",attrs:{"_ngcontent-c1":""}},[e("li",{attrs:{"_ngcontent-c1":""}},[e("a",{staticClass:"active",attrs:{"_ngcontent-c1":"",title:"在线商城",href:"/",target:""}},[this._v("在线商城 ")])]),this._v(" "),e("li",{attrs:{"_ngcontent-c1":""}},[e("a",{attrs:{"_ngcontent-c1":"",title:"聚米官网",href:"http://zgjumi.cn/",target:"_blank"}},[this._v(" 聚米官网 ")])])])])}]};var f=s("VU/8")(p,m,!1,function(t){s("bSnw")},"data-v-a27bc8fc",null);e.a=f.exports},PgMb:function(t,e,s){"use strict";var i={props:{title:{type:String,required:!1},show:{type:Boolean,default:!0,required:!1}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("div",{staticClass:"gray-box"},[s("div",{staticClass:"title"},[s("h2",[t._v(t._s(t.title))]),t._v(" "),s("div",[t._t("right")],2)]),t._v(" "),s("div",[t._t("content")],2)]):t._e()},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("G/V0")},"data-v-636af3d5",null);e.a=a.exports},bSnw:function(t,e){},fxRn:function(t,e,s){s("+tPU"),s("zQR9"),t.exports=s("g8Ux")},g8Ux:function(t,e,s){var i=s("77Pl"),n=s("3fs2");t.exports=s("FeBl").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}}});