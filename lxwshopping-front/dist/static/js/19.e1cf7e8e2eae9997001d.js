webpackJsonp([19],{"5qNa":function(t,e){},JQso:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("PgMb"),a=i("K8dV"),n=i("qsHl"),r={data:function(){return{payType:1,addList:{},cartList:[],addressId:0,productId:"",num:"",orderTotal:0,userName:"",tel:"",streetName:"",payNow:"立刻支付",submit:!0,nickName:"",money:"1.00",info:"",email:"",orderId:"",type:"",moneySelect:"1.00",isCustom:!1,maxLength:30}},computed:{checkPrice:function(){var t=0;return this.cartList&&this.cartList.forEach(function(e){e.checked&&(t+=e.productNum*e.salePrice)}),t}},methods:{open:function(t,e){this.$notify.info({title:t,message:e})},checkValid:function(){""!==this.nickName&&""!==this.money&&this.isMoney(this.money)&&""!==this.email&&this.isEmail(this.email)?this.submit=!0:this.submit=!1},messageFail:function(t){this.$message.error({message:t})},changeSelect:function(t){"custom"!==t?this.money=t:(this.isCustom=!0,this.money=""),this.checkValid()},goodsDetails:function(t){window.open(window.location.origin+"#/product/"+t)},_getOrderDet:function(t){var e=this,i={params:{orderId:this.orderId}};Object(n.q)(i).then(function(t){e.cartList=t.result.goodsList,e.userName=t.result.userName,e.orderTotal=t.result.orderTotal})},paySuc:function(){var t=this;if(this.payNow="支付中...",this.submit=!1,1===this.payType)this.type="alipay";else if(2===this.payType)this.type="wechat_pay";else{if(3===this.payType)return this.type="QQ",void this.open("提示","暂不支持qq钱包支付");this.type="其它"}var e=this.cartList[0].title;Object(n.u)({nickName:this.userName,money:this.money,info:e,orderId:this.orderId,payType:this.type}).then(function(e){if(!0===e.success)if(1===t.payType){var i=document.createElement("div");i.innerHTML=e.result,document.body.appendChild(i),document.forms.alipaysubmit.submit()}else 2===t.payType?t.$router.push({path:"/order/wechat"}):3===t.payType?t.$router.push({path:"/order/qqpay"}):t.$router.push({path:"/order/alipay"});else t.payNow="立刻支付",t.submit=!0,t.messageFail(e.message)})},isMoney:function(t){if(t<.1)return!1;return!!new RegExp(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/).test(t)},isEmail:function(t){return!!new RegExp(/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/).test(t)}},created:function(){this.orderId=this.$route.params.orderId,this.orderId?this._getOrderDet(this.orderId):this.$router.push({path:"/"})},components:{YShelf:s.a,YButton:a.a}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w",staticStyle:{"padding-bottom":"100px"}},[i("y-shelf",{attrs:{title:"支付订单"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"box-inner order-info"},[i("h3",[t._v("提交订单成功，请选择支付方式")]),t._v(" "),i("p",{staticClass:"payment-detail"},[t._v("请在 "),i("span",[t._v("2 小时内")]),t._v("完成支付，超时订单将自动取消。")]),t._v(" "),i("p",{staticClass:"payment-detail"},[t._v("我们不会在您完成支付后的 72 小时内发货，您的支付将用作捐赠")])]),t._v(" "),i("div",{staticClass:"pay-type"},[i("div",{staticClass:"p-title"},[t._v("支付方式")]),t._v(" "),i("div",{staticClass:"pay-item"},[i("div",{class:{active:1==t.payType},on:{click:function(e){t.payType=1}}},[i("img",{attrs:{src:"/static/images/alipay@2x.png",alt:""}})]),t._v(" "),i("div",{class:{active:2==t.payType},on:{click:function(e){t.payType=2}}},[i("img",{attrs:{src:"/static/images/weixinpay@2x.png",alt:""}})]),t._v(" "),i("div",{class:{active:3==t.payType},on:{click:function(e){t.payType=3}}},[i("img",{attrs:{src:"/static/images/qqpay.png",alt:""}})])])]),t._v(" "),i("div",[i("div",{staticClass:"box-inner"},[i("div",[i("span",[t._v("\n              订单金额：\n            ")]),t._v(" "),i("em",[i("span",[t._v("¥")]),t._v(t._s(t.orderTotal.toFixed(2)))]),t._v(" "),i("span",[t._v("\n              实际应付金额：\n            ")]),t._v(" "),i("em",[i("span",[t._v("¥")]),t._v(t._s(t.orderTotal.toFixed(2)))]),t._v(" "),i("y-button",{staticStyle:{width:"120px",height:"40px","font-size":"16px","line-height":"38px"},attrs:{text:t.payNow,classStyle:t.submit?"main-btn":"disabled-btn"},on:{btnClick:function(e){return t.paySuc()}}})],1)])])])])],1)},staticRenderFns:[]};var c=i("VU/8")(r,o,!1,function(t){i("5qNa")},"data-v-245cb2d1",null);e.default=c.exports}});