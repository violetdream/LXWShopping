webpackJsonp([12],{CQ36:function(t,e){},KVCh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("qsHl"),i=s("PgMb"),r=s("VKKs"),n={data:function(){return{orderList:[0],userId:"",orderStatus:"",loading:!0,currentPage:1,pageSize:5,total:0}},methods:{message:function(t){this.$message.error({message:t})},handleSizeChange:function(t){this.pageSize=t,this._orderList()},handleCurrentChange:function(t){this.currentPage=t,this._orderList()},orderPayment:function(t){window.open(window.location.origin+"#/order/payment/"+t)},goodsDetails:function(t){window.open(window.location.origin+"#/product/"+t)},orderDetail:function(t){this.$router.push({path:"orderDetail",query:{orderId:t}})},getOrderStatus:function(t){return"0"===t?"支付审核中":"2"===t?"待发货":"3"===t?"待收货":"4"===t?"交易成功":"5"===t?"交易关闭":"6"===t?"支付失败":void 0},_orderList:function(){var t=this,e={params:{size:this.pageSize,page:this.currentPage}};Object(a.t)(e).then(function(e){t.orderList=e.result.data,t.total=e.result.total,t.loading=!1})},_delOrder:function(t,e){var s=this,i={params:{orderId:t}};Object(a.j)(i).then(function(t){!0===t.success?s.orderList.splice(e,1):s.message("删除失败")})}},created:function(){this.userId=Object(r.a)("userId"),this._orderList()},components:{YShelf:i.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("y-shelf",{attrs:{title:"我的订单"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t.orderList.length?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-height":"10vw"},attrs:{"element-loading-text":"加载中..."}},t._l(t.orderList,function(e,a){return s("div",{key:a},[s("div",{staticClass:"gray-sub-title cart-title"},[s("div",{staticClass:"first"},[s("div",[s("span",{staticClass:"date",domProps:{textContent:t._s(e.createTime)}}),t._v(" "),s("span",{staticClass:"order-id"},[t._v(" 订单号： "),s("a",{on:{click:function(s){return t.orderDetail(e.orderId)}}},[t._v(t._s(e.orderId))])])]),t._v(" "),s("div",{staticClass:"f-bc"},[s("span",{staticClass:"price"},[t._v("单价")]),t._v(" "),s("span",{staticClass:"num"},[t._v("数量")]),t._v(" "),s("span",{staticClass:"operation"},[t._v("商品操作")])])]),t._v(" "),s("div",{staticClass:"last"},[s("span",{staticClass:"sub-total"},[t._v("实付金额")]),t._v(" "),s("span",{staticClass:"order-detail"},[s("a",{on:{click:function(s){return t.orderDetail(e.orderId)}}},[t._v("查看详情 >"),s("em",{staticClass:"icon-font"})])])])]),t._v(" "),s("div",{staticClass:"pr"},[t._l(e.orderItemDto,function(i,r){return s("div",{key:r,staticClass:"cart"},[s("div",{staticClass:"cart-l",class:{bt:r>0}},[s("div",{staticClass:"car-l-l"},[s("div",{staticClass:"img-box"},[s("a",{on:{click:function(e){return t.goodsDetails(i.itemId)}}},[s("img",{attrs:{src:i.picPath,alt:""}})])]),t._v(" "),s("div",{staticClass:"ellipsis"},[s("a",{staticStyle:{color:"#626262"},on:{click:function(e){return t.goodsDetails(i.itemId)}}},[t._v(t._s(i.title))])])]),t._v(" "),s("div",{staticClass:"cart-l-r"},[s("div",[t._v("¥ "+t._s(Number(i.price).toFixed(2)))]),t._v(" "),s("div",{staticClass:"num"},[t._v(t._s(i.num))]),t._v(" "),s("div",{staticClass:"type"},[r<1?s("el-button",{staticClass:"del-order",staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"small"},on:{click:function(s){return t._delOrder(e.orderId,a)}}},[t._v("删除此订单")]):t._e()],1)])]),t._v(" "),s("div",{staticClass:"cart-r"},[s("span"),t._v(" "),s("span")])])}),t._v(" "),s("div",{staticClass:"prod-operation pa",staticStyle:{right:"0",top:"0"}},[s("div",{staticClass:"total"},[t._v("¥ "+t._s(e.payment))]),t._v(" "),0===e.status?s("div",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){return t.orderPayment(e.orderId)}}},[t._v("现在付款")])],1):t._e(),t._v(" "),0!==e.status?s("div",{staticClass:"status"},[t._v(" "+t._s(t.getOrderStatus(e.status))+"  ")]):t._e()])],2)])}),0):s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"no-info",attrs:{"element-loading-text":"加载中..."}},[s("div",{staticStyle:{padding:"100px 0","text-align":"center"}},[t._v("\n          你还未创建过订单\n        ")])])])]),t._v(" "),s("div",{staticStyle:{float:"right"}},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("CQ36")},"data-v-7c406dc2",null);e.default=l.exports}});